{% load static %}

<style>
/* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã –≤ —Ç–∞–±–∞—Ö */
.tab-pane {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
}

.tab-pane .row {
    margin-bottom: 0.25rem !important;
}

.tab-pane .form-select,
.tab-pane .form-control {
    margin-bottom: 0.125rem !important;
}

.tab-content {
    padding: 0.5rem !important;
}

/* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã —É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ */
#sortFields .row {
    margin-bottom: 0.125rem !important;
}

#sortFields .col-md-3 {
    margin-bottom: 0.125rem !important;
}

/* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã —É –∫–Ω–æ–ø–æ–∫ */
.d-flex.mb-1 {
    margin-bottom: 0.25rem !important;
}

/* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã —É —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ */
.mt-1 {
    margin-top: 0.25rem !important;
}



/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø–∞–Ω–µ–ª–∏ */
.controls-panel .btn-primary {
    white-space: nowrap;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ */
.table.alarm-table .sticky-column {
    box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1) !important;
    transition: all 0.2s ease !important;
    position: sticky !important;
}

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ */
.table.alarm-table th.sticky-column,
.table.alarm-table td.sticky-column {
    position: sticky !important;
}

[data-bs-theme="dark"] .table.alarm-table .sticky-column {
    box-shadow: 2px 0 4px rgba(255, 255, 255, 0.1) !important;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü */
.table.alarm-table .sticky-column:hover {
    box-shadow: 2px 0 6px rgba(0, 0, 0, 0.15) !important;
    transform: translateZ(1px) !important;
}

[data-bs-theme="dark"] .table.alarm-table .sticky-column:hover {
    box-shadow: 2px 0 6px rgba(255, 255, 255, 0.15) !important;
}



/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
.table.alarm-table th.sticky-column {
    position: sticky !important;
}

.table.alarm-table th.sticky-column::after {
    content: 'üìå';
    position: absolute;
    top: 2px;
    right: 4px;
    font-size: 10px;
    opacity: 0.6;
    pointer-events: none;
    z-index: 1;
}
</style>

<div class="controls-panel mb-3 mt-0">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ç–∞–±–æ–≤ -->
    <div class="d-flex align-items-center justify-content-between">
        <ul class="nav nav-tabs flex-grow-1" id="controlsTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="filters-tab" data-bs-toggle="tab" data-bs-target="#filters-content" type="button" role="tab" aria-controls="filters-content" aria-selected="true" title="–§–∏–ª—å—Ç—Ä—ã &#10;‚Ä¢ –ö–ª–∏–∫ - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å &#10;‚Ä¢ –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ - —Å–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å">
                    <i class="fas fa-filter me-1"></i>–§–∏–ª—å—Ç—Ä—ã
                    <span id="activeFiltersCount" class="badge bg-primary ms-1" style="display: none;">0</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="sort-tab" data-bs-toggle="tab" data-bs-target="#sort-content" type="button" role="tab" aria-controls="sort-content" aria-selected="false" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ &#10;‚Ä¢ –ö–ª–∏–∫ - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å &#10;‚Ä¢ –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ - —Å–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å">
                    <i class="fas fa-sort me-1"></i>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
                    <span id="activeSortsCount" class="badge bg-success ms-1" style="display: none;">0</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings-content" type="button" role="tab" aria-controls="settings-content" aria-selected="false" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ &#10;‚Ä¢ –ö–ª–∏–∫ - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å &#10;‚Ä¢ –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ - —Å–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å">
                    <i class="fas fa-cog me-1"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </li>
        </ul>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞—Ç—å/–¥–æ–±–∞–≤–∏—Ç—å) -->
        <div class="ms-3">
            {% if page_type == 'alarms' %}
                <a href="{% url 'alarms:alarm_create' %}" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–≤–æ–≥—É
                </a>
            {% elif page_type == 'tables' %}
                <a href="{% url 'alarms:table_create' %}" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É
                </a>
            {% endif %}
        </div>
    </div>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–∞–±–æ–≤ -->
    <div class="tab-content border border-top-0 rounded-bottom p-3" id="controlsTabContent">
        <!-- –¢–∞–± —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
        <div class="tab-pane fade show active" id="filters-content" role="tabpanel" aria-labelledby="filters-tab">
            <input type="hidden" name="page" value="1">
            {% include 'alarms/includes/filter_form_simple.html' %}
        </div>

        <!-- –¢–∞–± —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ -->
        <div class="tab-pane fade" id="sort-content" role="tabpanel" aria-labelledby="sort-tab">
            <form method="get" id="sortForm" class="mb-0">
                <input type="hidden" name="display_mode" value="{{ display_mode }}">
                <input type="hidden" name="page" value="1">
                {% include 'alarms/includes/sort_form_simple.html' %}
            </form>
        </div>

        <!-- –¢–∞–± –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div class="tab-pane fade" id="settings-content" role="tabpanel" aria-labelledby="settings-tab">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="mb-3">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h6>
                    <div class="mb-3">
                        <label for="recordsPerPage" class="form-label">–ó–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:</label>
                        <select class="form-select form-select-sm" id="recordsPerPage" name="paginate_by">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="showTooltips" checked>
                            <label class="form-check-label" for="showTooltips">
                                –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <h6 class="mb-3">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤</h6>
                    <div class="mb-3">
                        <label for="stickyColumn" class="form-label">–ó–∞–∫—Ä–µ–ø–∏—Ç—å —Å—Ç–æ–ª–±—Ü—ã –¥–æ:</label>
                        <small class="form-text text-muted d-block mb-2">
                            –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–æ–ª–±—Ü–∞ –∑–∞–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã —Å–ª–µ–≤–∞ –æ—Ç –Ω–µ–≥–æ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
                        </small>
                        <select class="form-select form-select-sm" id="stickyColumn" onchange="applyStickyColumn()">
                            <option value="">–ù–µ –∑–∞–∫—Ä–µ–ø–ª—è—Ç—å</option>
                            <option value="1" selected>–î–µ–π—Å—Ç–≤–∏—è</option>
                            <option value="2">ID</option>
                            <option value="3">–ö–∞–Ω–∞–ª</option>
                            <option value="4">–°–æ–æ–±—â–µ–Ω–∏–µ</option>
                            <option value="5">–¢–∞–±–ª–∏—Ü–∞</option>
                            <option value="6">–ö–ª–∞—Å—Å</option>
                            <option value="7">–õ–æ–≥–∏–∫–∞</option>
                            <option value="8">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</option>
                            <option value="9">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="10">–õ–∏–º–∏—Ç</option>
                            <option value="11">–¢–∏–ø –ª–∏–º–∏—Ç–∞</option>
                            <option value="12">–ú–∏–Ω</option>
                            <option value="13">–ú–∞–∫—Å</option>
                            <option value="14">–ö–∞–Ω–∞–ª –º–∏–Ω</option>
                            <option value="15">–ö–∞–Ω–∞–ª –º–∞–∫—Å</option>
                            <option value="16">–ì–∏—Å—Ç –º–∏–Ω</option>
                            <option value="17">–ì–∏—Å—Ç –º–∞–∫—Å</option>
                            <option value="18">–î–∏—Å–∫—Ä–µ—Ç</option>
                            <option value="19">–°–æ–∑–¥–∞–Ω–æ</option>
                            <option value="20">–û–±–Ω–æ–≤–ª–µ–Ω–æ</option>
                        </select>
                    </div>
                    <h6 class="mb-3">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h6>
                    <div class="d-grid gap-2">
                        <button type="button" class="btn btn-sm btn-outline-info" onclick="saveCurrentSettings()">
                            <i class="fas fa-save me-1"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="resetToDefaults()">
                            <i class="fas fa-undo me-1"></i>–°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

</div>

<script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–±
    const savedTab = localStorage.getItem('activeControlsTab') || 'filters-tab';
    const tab = new bootstrap.Tab(document.getElementById(savedTab));
    tab.show();
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    loadSavedSettings();
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    loadControlsPanelState();
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—á–µ—Ç—á–∏–∫–∏
    updateCounters();
});

// –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–ª–∏–∫–∞
let lastClickedTab = null;
let lastClickTime = 0;

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –ø–æ —Ç–∞–±—É
function handleTabClick(event) {
    const currentTime = Date.now();
    const clickedTab = event.target;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ —ç—Ç–æ –∫–ª–∏–∫ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ–º—É —Ç–∞–±—É –≤ —Ç–µ—á–µ–Ω–∏–µ 500ms
    if (clickedTab === lastClickedTab && 
        clickedTab.classList.contains('active') && 
        currentTime - lastClickTime < 500) {
        
        // –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ–º—É —Ç–∞–±—É - —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø–∞–Ω–µ–ª—å
        event.preventDefault();
        event.stopPropagation();
        toggleControls();
        return false;
    }
    
    // –û–±—ã—á–Ω—ã–π –∫–ª–∏–∫ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª–∏–∫–∞
    lastClickedTab = clickedTab;
    lastClickTime = currentTime;
    
    // –ï—Å–ª–∏ –ø–∞–Ω–µ–ª—å —Å–≤–µ—Ä–Ω—É—Ç–∞, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –µ—ë –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ª—é–±–æ–π —Ç–∞–±
    const content = document.getElementById('controlsTabContent');
    if (content.style.display === 'none') {
        toggleControls();
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–±–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–ª–∏–∫–æ–≤
document.querySelectorAll('[data-bs-toggle="tab"]').forEach(tab => {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
    tab.addEventListener('click', handleTabClick);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–± –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
    tab.addEventListener('shown.bs.tab', function (event) {
        localStorage.setItem('activeControlsTab', event.target.id);
    });
});



// –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏
function toggleControls() {
    const content = document.getElementById('controlsTabContent');
    
    if (content.style.display === 'none') {
        content.style.display = 'block';
        localStorage.setItem('controlsPanelCollapsed', 'false');
    } else {
        content.style.display = 'none';
        localStorage.setItem('controlsPanelCollapsed', 'true');
    }
}





// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
function loadSavedSettings() {
    const savedSettings = JSON.parse(localStorage.getItem('alarmListSettings') || '{}');
    
    if (savedSettings.recordsPerPage) {
        document.getElementById('recordsPerPage').value = savedSettings.recordsPerPage;
    }
    
    if (savedSettings.showTooltips !== undefined) {
        document.getElementById('showTooltips').checked = savedSettings.showTooltips;
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞
    if (savedSettings.stickyColumn !== undefined) {
        const stickySelect = document.getElementById('stickyColumn');
        if (stickySelect) {
            stickySelect.value = savedSettings.stickyColumn;
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            applyStickyColumn(savedSettings.stickyColumn);
        }
    }
}

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
function loadControlsPanelState() {
    const isCollapsed = localStorage.getItem('controlsPanelCollapsed') === 'true';
    const content = document.getElementById('controlsTabContent');
    
    if (isCollapsed) {
        content.style.display = 'none';
    } else {
        content.style.display = 'block';
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
function saveCurrentSettings() {
    const settings = {
        recordsPerPage: document.getElementById('recordsPerPage').value,
        showTooltips: document.getElementById('showTooltips').checked,
        stickyColumn: document.getElementById('stickyColumn').value
    };
    
    localStorage.setItem('alarmListSettings', JSON.stringify(settings));
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
}

// –°–±—Ä–æ—Å –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º
function resetToDefaults() {
    document.getElementById('recordsPerPage').value = '20';
    document.getElementById('showTooltips').checked = true;
    
    localStorage.removeItem('alarmListSettings');
    
    showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º!', 'info');
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
function updateCounters() {
    // –°—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    const activeFilters = document.querySelectorAll('#filterFields .filter-row').length;
    const filtersCount = document.getElementById('activeFiltersCount');
    if (filtersCount) {
        if (activeFilters > 0) {
            filtersCount.textContent = activeFilters;
            filtersCount.style.display = 'inline';
        } else {
            filtersCount.style.display = 'none';
        }
    }
    
    // –°—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫
    const activeSorts = document.querySelectorAll('#sortFields .sort-row').length;
    const sortsCount = document.getElementById('activeSortsCount');
    if (sortsCount) {
        if (activeSorts > 0) {
            sortsCount.textContent = activeSorts;
            sortsCount.style.display = 'inline';
        } else {
            sortsCount.style.display = 'none';
        }
    }
}



// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
function showNotification(message, type = 'info') {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(alertDiv);
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.remove();
        }
    }, 3000);
}

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ JavaScript —Ñ–∞–π–ª—ã
document.addEventListener('DOMContentLoaded', function() {
    // –ü–æ–¥–∫–ª—é—á–∞–µ–º filters.js
    if (!document.querySelector('script[src*="filters.js"]')) {
        const filtersScript = document.createElement('script');
        filtersScript.src = '{% static "js/filters.js" %}';
        document.head.appendChild(filtersScript);
    }
    
    // –ü–æ–¥–∫–ª—é—á–∞–µ–º sort.js
    if (!document.querySelector('script[src*="sort.js"]')) {
        const sortScript = document.createElement('script');
        sortScript.src = '{% static "js/sort.js" %}';
        document.head.appendChild(sortScript);
    }
});

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
function addFilterField() {
    const filterFields = document.getElementById('filterFields');
    const filterRow = document.createElement('div');
    filterRow.className = 'filter-row row mb-2';
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    const displayMode = document.querySelector('input[name="display_mode"]')?.value || 'alarms';
    const isTables = displayMode === 'tables';
    
    // –ü–æ–ª—è –¥–ª—è —Ç–∞–±–ª–∏—Ü
    const tableFields = `
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–µ</option>
        <option value="table_number">–ù–æ–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã</option>
        <option value="name">–ù–∞–∑–≤–∞–Ω–∏–µ</option>
        <option value="description">–û–ø–∏—Å–∞–Ω–∏–µ</option>
        <option value="alarms_count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥</option>
        <option value="created_at">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</option>
        <option value="updated_at">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</option>
    `;
    
    // –ü–æ–ª—è –¥–ª—è –∞–≤–∞—Ä–∏–π
    const alarmFields = `
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–µ</option>
        <option value="alarm_class">–ö–ª–∞—Å—Å –∞–≤–∞—Ä–∏–∏</option>
        <option value="logic">–õ–æ–≥–∏–∫–∞</option>
        <option value="limit_type">–¢–∏–ø –ª–∏–º–∏—Ç–∞</option>
        <option value="limit_config_type">–¢–∏–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–º–∏—Ç–∞</option>
        <option value="confirm_method">–ú–µ—Ç–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</option>
        <option value="table_number">–¢–∞–±–ª–∏—Ü–∞</option>
        <option value="channel">–ö–∞–Ω–∞–ª</option>
        <option value="message">–°–æ–æ–±—â–µ–Ω–∏–µ</option>
    `;
    
    filterRow.innerHTML = `
        <div class="col-md-3">
            <select class="form-select form-select-sm" name="filter_field[]">
                ${isTables ? tableFields : alarmFields}
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select form-select-sm" name="filter_operator[]">
                <option value="exact">–¢–æ—á–Ω–æ</option>
                <option value="contains">–°–æ–¥–µ—Ä–∂–∏—Ç</option>
                <option value="startswith">–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å</option>
                <option value="endswith">–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞</option>
            </select>
        </div>
        <div class="col-md-4">
            <input type="text" class="form-control form-control-sm" name="filter_value[]" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ">
        </div>
        <div class="col-md-2">
            <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeFilterField(this)">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    `;
    filterFields.appendChild(filterRow);
    updateCounters();
}

function removeFilterField(button) {
    button.closest('.filter-row').remove();
    updateCounters();
}

function clearFilters() {
    const filterFields = document.getElementById('filterFields');
    filterFields.innerHTML = '';
    updateCounters();
}

function applyFilters() {
    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    const filterData = {};
    const filterRows = document.querySelectorAll('#filterFields .filter-row');
    
    filterRows.forEach((row, index) => {
        const field = row.querySelector('select[name="filter_field[]"]').value;
        const operator = row.querySelector('select[name="filter_operator[]"]').value;
        const value = row.querySelector('input[name="filter_value[]"]').value;
        
        if (field && value) {
            filterData[`filter_field_${index}`] = field;
            filterData[`filter_operator_${index}`] = operator;
            filterData[`filter_value_${index}`] = value;
        }
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    filterData.page = '1';
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    const url = new URL(window.location);
    Object.keys(filterData).forEach(key => {
        url.searchParams.set(key, filterData[key]);
    });
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    window.location.href = url.toString();
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
function addSortField() {
    const sortFields = document.getElementById('sortFields');
    const sortRow = document.createElement('div');
    sortRow.className = 'sort-row row mb-0';
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    const displayMode = document.querySelector('input[name="display_mode"]')?.value || 'alarms';
    const isTables = displayMode === 'tables';
    
    // –ü–æ–ª—è –¥–ª—è —Ç–∞–±–ª–∏—Ü
    const tableFields = `
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–µ</option>
        <option value="table_number">–ù–æ–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã</option>
        <option value="name">–ù–∞–∑–≤–∞–Ω–∏–µ</option>
        <option value="description">–û–ø–∏—Å–∞–Ω–∏–µ</option>
        <option value="alarms_count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–≤–æ–≥</option>
        <option value="created_at">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</option>
        <option value="updated_at">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</option>
    `;
    
    // –ü–æ–ª—è –¥–ª—è –∞–≤–∞—Ä–∏–π
    const alarmFields = `
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª–µ</option>
        <option value="alarm_class">–ö–ª–∞—Å—Å –∞–≤–∞—Ä–∏–∏</option>
        <option value="logic">–õ–æ–≥–∏–∫–∞</option>
        <option value="limit_type">–¢–∏–ø –ª–∏–º–∏—Ç–∞</option>
        <option value="limit_config_type">–¢–∏–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–º–∏—Ç–∞</option>
        <option value="confirm_method">–ú–µ—Ç–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</option>
        <option value="table_number">–¢–∞–±–ª–∏—Ü–∞</option>
        <option value="channel">–ö–∞–Ω–∞–ª</option>
        <option value="message">–°–æ–æ–±—â–µ–Ω–∏–µ</option>
        <option value="created_at">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</option>
        <option value="updated_at">–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</option>
    `;
    
    sortRow.innerHTML = `
        <div class="col-md-4">
            <select class="form-select form-select-sm sort-field" name="sort_field[]">
                ${isTables ? tableFields : alarmFields}
            </select>
        </div>
        <div class="col-md-4">
            <select class="form-select form-select-sm sort-order" name="sort_order[]">
                <option value="asc">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
                <option value="desc">–ü–æ —É–±—ã–≤–∞–Ω–∏—é</option>
            </select>
        </div>
        <div class="col-md-4">
            <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeSortField(this)">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    `;
    sortFields.appendChild(sortRow);
    updateCounters();
}

function removeSortField(button) {
    button.closest('.sort-row').remove();
    updateCounters();
}

function clearAllSorts() {
    const sortFields = document.getElementById('sortFields');
    sortFields.innerHTML = '';
    updateCounters();
}

function applySorts() {
    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    const sortData = {};
    const sortRows = document.querySelectorAll('#sortFields .sort-row');
    
    sortRows.forEach((row, index) => {
        const field = row.querySelector('.sort-field').value;
        const order = row.querySelector('.sort-order').value;
        
        if (field) {
            sortData[`sort_${index}`] = field;
            sortData[`order_${index}`] = order;
        }
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    sortData.page = '1';
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    const url = new URL(window.location);
    Object.keys(sortData).forEach(key => {
        url.searchParams.set(key, sortData[key]);
    });
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    window.location.href = url.toString();
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞
function applyStickyColumn(columnIndex = null) {
    const stickySelect = document.getElementById('stickyColumn');
    const selectedColumn = columnIndex || stickySelect?.value;
    
    // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è
    clearAllSticky();
    
    if (selectedColumn && selectedColumn !== '') {
        const columnNum = parseInt(selectedColumn);
        setStickyColumn(columnNum);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä
        const currentSettings = JSON.parse(localStorage.getItem('alarmListSettings') || '{}');
        currentSettings.stickyColumn = selectedColumn;
        localStorage.setItem('alarmListSettings', JSON.stringify(currentSettings));
        
        // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        const stickySelect = document.getElementById('stickyColumn');
        const selectedOptionText = stickySelect?.options[stickySelect.selectedIndex]?.text || '—Å—Ç–æ–ª–±–µ—Ü';
        
        if (columnNum === 1) {
            showNotification(`–ó–∞–∫—Ä–µ–ø–ª–µ–Ω —Å—Ç–æ–ª–±–µ—Ü "${selectedOptionText}"`, 'success');
        } else {
            showNotification(`–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ ${columnNum} —Å—Ç–æ–ª–±—Ü–æ–≤ (–æ—Ç "–î–µ–π—Å—Ç–≤–∏—è" –¥–æ "${selectedOptionText}")`, 'success');
        }
    } else {
        // –£–±–∏—Ä–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å–ª–∏ —Å—Ç–æ–ª–±–µ—Ü –Ω–µ –≤—ã–±—Ä–∞–Ω
        const currentSettings = JSON.parse(localStorage.getItem('alarmListSettings') || '{}');
        delete currentSettings.stickyColumn;
        localStorage.setItem('alarmListSettings', JSON.stringify(currentSettings));
        
        showNotification('–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –æ—Ç–∫–ª—é—á–µ–Ω–æ', 'info');
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö sticky —Å—Ç–∏–ª–µ–π
function clearAllSticky() {
    const table = document.querySelector('.alarm-table');
    const stickyBorder = document.getElementById('stickyBorder');
    if (!table) return;
    
    // –£–±–∏—Ä–∞–µ–º sticky —Å—Ç–∏–ª–∏ —Å–æ –≤—Å–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤
    for (let i = 1; i <= 20; i++) {
        const headers = table.querySelectorAll(`th:nth-child(${i})`);
        const cells = table.querySelectorAll(`td:nth-child(${i})`);
        
        [...headers, ...cells].forEach(element => {
            element.style.removeProperty('--sticky-left');
            element.style.left = '';
            element.classList.remove('sticky-column');
        });
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É
    if (stickyBorder) {
        stickyBorder.classList.remove('visible');
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ sticky –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –∏ –≤—Å–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Å–ª–µ–≤–∞
function setStickyColumn(columnIndex) {
    const table = document.querySelector('.alarm-table');
    const stickyBorder = document.getElementById('stickyBorder');
    if (!table) return;
    
    let cumulativeWidth = 0;
    let stickyColumnsCount = 0;
    
    // –ó–∞–∫—Ä–µ–ø–ª—è–µ–º –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã –æ—Ç 1 –¥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
    for (let i = 1; i <= columnIndex; i++) {
        const headers = table.querySelectorAll(`th:nth-child(${i})`);
        const cells = table.querySelectorAll(`td:nth-child(${i})`);
        
        if (headers.length === 0) continue; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ–ª–±—Ü—ã
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º sticky —Å—Ç–∏–ª–∏ –∫ —Ç–µ–∫—É—â–µ–º—É —Å—Ç–æ–ª–±—Ü—É
        [...headers, ...cells].forEach(element => {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
            element.style.setProperty('--sticky-left', `${cumulativeWidth}px`);
            element.classList.add('sticky-column');
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º —à–∏—Ä–∏–Ω—É —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ –∫ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω–µ
        const currentHeader = table.querySelector(`th:nth-child(${i})`);
        if (currentHeader) {
            cumulativeWidth += currentHeader.offsetWidth;
            stickyColumnsCount++;
        }
    }
    
    // –£–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü–µ–π
    if (stickyBorder) {
        if (columnIndex > 0 && cumulativeWidth > 0) {
            // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const tableContainer = document.querySelector('.table-responsive');
            const cardBody = document.querySelector('.card-body');
            
            if (tableContainer && cardBody) {
                const tableRect = tableContainer.getBoundingClientRect();
                const cardRect = cardBody.getBoundingClientRect();
                const tableHeight = table.offsetHeight;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ card-body
                const containerOffsetLeft = tableRect.left - cardRect.left;
                const containerOffsetTop = tableRect.top - cardRect.top;
                
                // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –≥—Ä–∞–Ω–∏—Ü—É
                const totalLeft = containerOffsetLeft + cumulativeWidth;
                stickyBorder.style.setProperty('--sticky-border-left', `${totalLeft}px`);
                stickyBorder.style.setProperty('--sticky-border-top', `${containerOffsetTop}px`);
                stickyBorder.style.setProperty('--sticky-border-height', `${tableHeight}px`);
                stickyBorder.classList.add('visible');
            }
        } else {
            // –°–∫—Ä—ã–≤–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É –µ—Å–ª–∏ –Ω–µ—Ç –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤
            stickyBorder.classList.remove('visible');
        }
    }
    
    console.log(`–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ —Å—Ç–æ–ª–±—Ü–æ–≤: ${stickyColumnsCount} (–æ—Ç 1 –¥–æ ${columnIndex}), –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–∞ ${cumulativeWidth}px`);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π sticky —Å—Ç–æ–ª–±—Ü–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
function recalculateStickyPositions() {
    const stickySelect = document.getElementById('stickyColumn');
    const selectedColumn = stickySelect?.value;
    
    if (selectedColumn && selectedColumn !== '') {
        // –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç —Å –Ω–æ–≤—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
        setStickyColumn(parseInt(selectedColumn));
    }
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
window.addEventListener('resize', function() {
    clearTimeout(window.stickyRecalcTimeout);
    window.stickyRecalcTimeout = setTimeout(recalculateStickyPositions, 500);
});

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –≥—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    const tableContainer = document.querySelector('.table-responsive');
    if (tableContainer) {
        tableContainer.addEventListener('scroll', function() {
            // –ü—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–∑–∏—Ü–∏—è –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω—è—Ç—å—Å—è,
            // –Ω–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
        });
    }
});
</script> 
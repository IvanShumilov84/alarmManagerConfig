# Создание установщика для Windows

## Варианты установщика

### 1. Простой .bat установщик (рекомендуется)

**Преимущества:**
- Быстрая сборка
- Не требует дополнительных инструментов
- Работает на любой Windows машине с Python

**Использование:**
1. Скопируйте все файлы проекта на целевую машину
2. Запустите `start_server.bat`
3. Скрипт автоматически:
   - Создаст виртуальное окружение
   - Установит зависимости
   - Выполнит миграции
   - Запустит сервер

### 2. Standalone .exe с Nuitka

**Преимущества:**
- Полностью автономный исполняемый файл
- Не требует установки Python на целевой машине
- Профессиональный вид

**Недостатки:**
- Долгая сборка (10-30 минут)
- Большой размер файла (100-500 МБ)
- Требует Nuitka для сборки

## Сборка .exe установщика

### Шаг 1: Подготовка окружения

```bash
# Активируйте виртуальное окружение
source venv/Scripts/activate

# Установите Nuitka
pip install nuitka

# Установите все зависимости
pip install -r requirements.txt
```

### Шаг 2: Автоматическая сборка

```bash
# Запустите скрипт сборки
python build_installer.py
```

Скрипт автоматически:
- Проверит наличие Nuitka
- Соберет .exe файл
- Скопирует все необходимые файлы Django
- Создаст README для пользователя

### Шаг 3: Ручная сборка (альтернатива)

```bash
# Команда сборки
python -m nuitka --standalone --enable-plugin=django --output-dir=dist run_server.py

# Копирование файлов проекта
cp -r manage.py db.sqlite3 alarm_manager alarms templates static dist/run_server.dist/
```

## Структура готового установщика

```
dist/run_server.dist/
├── run_server.exe          # Главный исполняемый файл
├── manage.py               # Django управление
├── db.sqlite3              # База данных
├── alarm_manager/          # Настройки проекта
├── alarms/                 # Приложение аварийных сигналов
├── templates/              # HTML шаблоны
├── static/                 # Статические файлы
└── README.txt              # Инструкция для пользователя
```

## Использование готового установщика

### Для пользователя:

1. **Распакуйте архив** в любую папку
2. **Запустите** `run_server.exe`
3. **Дождитесь** запуска сервера (3-5 секунд)
4. **Браузер откроется** автоматически по адресу http://127.0.0.1:8000

### Для остановки:
- Нажмите `Ctrl+C` в окне консоли
- Или закройте окно

## Устранение проблем

### Ошибка "Python не найден"
- Установите Python 3.8+ с официального сайта
- Добавьте Python в PATH при установке

### Ошибка "Порт занят"
- Закройте другие приложения на порту 8000
- Или измените порт в `run_server.py`

### Антивирус блокирует .exe
- Добавьте папку в исключения антивируса
- Или используйте .bat версию

### Ошибка "DLL не найден"
- Установите Visual C++ Redistributable
- Или используйте .bat версию

## Создание архива для распространения

### Для .bat версии:
```bash
# Создайте архив с файлами проекта
zip -r alarm_manager_bat.zip . -x "venv/*" "*.pyc" "__pycache__/*" ".git/*"
```

### Для .exe версии:
```bash
# Архив уже готов в папке dist/run_server.dist/
zip -r alarm_manager_exe.zip dist/run_server.dist/
```

## Рекомендации

1. **Для внутреннего использования** - используйте .bat версию
2. **Для внешних клиентов** - используйте .exe версию
3. **Для тестирования** - используйте .bat версию
4. **Для продакшена** - используйте Docker или полноценный веб-сервер

## Тестирование установщика

1. Создайте чистую виртуальную машину Windows
2. Скопируйте установщик
3. Запустите и проверьте все функции
4. Убедитесь, что экспорт JSON работает
5. Проверьте создание/редактирование аварийных сигналов 